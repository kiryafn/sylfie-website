
<header th:fragment="header" class="bg-white border-b shadow-sm fixed top-0 left-0 w-full z-50">

  <div class="container mx-auto px-4 flex items-center justify-between h-16">

    <!-- Лого -->
    <a th:href="@{/home}" class="flex items-center space-x-2">
      <img src="/img/logos/full_logo.svg" alt="Logo" class="h-10">
    </a>

    <!-- Меню (десктоп) -->
    <nav id="main-menu" class="hidden md:flex items-center space-x-8 text-gray-700 font-medium">
      <a th:href="@{/home}" th:text="#{header.home}" class="hover:text-green-600">Home</a>
      <a th:href="@{/tours}" th:text="#{header.tours}" class="hover:text-green-600">Tours</a>
      <a th:href="@{/why-sylfie}" th:text="#{header.whyus}" class="hover:text-green-600">Why Sylfie</a>
    </nav>

    <!-- Правая часть -->
    <div class="flex items-center space-x-6">

      <div th:if="${userInfo != null}" th:object="${userInfo}" class="flex items-center space-x-6">

        <!-- Баланс -->
        <div class="text-right text-sm hidden md:block">
          <div class="text-gray-600">
            <span class="font-semibold text-green-600" th:text="|#{header.balance} *{balance}|"></span> €
          </div>
          <div class="text-gray-500">
            <span class="font-semibold text-blue-500" th:text="|#{header.bonus} *{bonusBalance}|"></span> €
          </div>
        </div>

        <!-- User dropdown -->
        <div class="relative">
          <button id="user-dropdown-btn" class="flex items-center focus:outline-none">
            <img th:src="@{*{avatarUrl}}" alt="User Avatar"
                 class="w-11 h-11 rounded-full object-cover">
          </button>

          <!-- Dropdown -->
          <ul id="user-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg hidden z-50">
            <li>
              <a th:href="@{/profile}" th:text="#{header.profile}"
                 class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Profile</a>
            </li>
            <li>
              <a th:href="@{/favorites}" th:text="#{header.favorites}"
                 class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Saved Items</a>
            </li>
            <li>
              <a th:href="@{/logout}" th:text="#{header.logout}"
                 class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Log out</a>
            </li>
          </ul>
        </div>

      </div>

      <div th:if="${userInfo == null}" class="flex items-center space-x-4">

        <a th:href="@{/login}"
           class="px-4 py-2 border border-green-600 text-green-600 rounded-full font-medium hover:bg-green-50 transition">
          Log In
        </a>

        <a th:href="@{/register}"
           class="px-4 py-2 bg-green-600 text-white rounded-full font-medium hover:bg-green-700 transition">
          Register
        </a>

      </div>

      <!-- Бургер для мобилки -->
      <button id="burger-btn" class="text-2xl text-gray-600 hover:text-green-600 md:hidden focus:outline-none">
        <i class="fas fa-bars"></i>
      </button>

    </div>
  </div>

  <!-- Меню для мобилки (скрыто по умолчанию) -->
  <nav id="mobile-menu" class="md:hidden hidden flex-col space-y-4 bg-white border-t px-4 py-4 text-gray-700 font-medium">
    <a th:href="@{/home}" th:text="#{header.home}" class="hover:text-green-600">Home</a>
    <a th:href="@{/tours}" th:text="#{header.tours}" class="hover:text-green-600">Tours</a>
    <a th:href="@{/why-g}" th:text="#{header.whyus}" class="hover:text-green-600">Why Sylfie</a>
  </nav>

  <!-- JS -->
  <script>
    // Burger button
    const burgerBtn = document.getElementById('burger-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    burgerBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // User dropdown
    const userDropdownBtn = document.getElementById('user-dropdown-btn');
    const userDropdownMenu = document.getElementById('user-dropdown-menu');

    userDropdownBtn.addEventListener('click', (e) => {
      e.stopPropagation(); // чтобы не закрывался при клике на кнопку
      userDropdownMenu.classList.toggle('hidden');
    });

    // Закрывать dropdown при клике вне
    document.addEventListener('click', (e) => {
      if (!userDropdownMenu.contains(e.target) && !userDropdownBtn.contains(e.target)) {
        userDropdownMenu.classList.add('hidden');
      }
    });
  </script>
</header>